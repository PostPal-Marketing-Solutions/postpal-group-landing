---
// Header - Navigation bar
// ------------
// Description: navigation bars offer a persistent and convenient way to switch between primary destinations in an app.
// Structure:
// - Logo: the logo of the website
// - Menu toggle: the mobile menu toggle of the navigation bar
// - Navigation Links: the navigation links of the menu
// - Actions: action buttons for the navigation bar
// - Theme Switcher: the mode (light/dark) switcher of the website

// Reference: https://wind-ui.com/components/navbars/

// Components
// - UI
import { Image } from 'astro:assets'
import Button from './Button.astro'
import Switcher from './ModeSwitcher.astro'

// Data
import { navigationBarData } from '../../config/navigationBar'
import lightLogo from '../../assets/logos/logo-transparent-dark.png'
import darkLogo from '../../assets/logos/logo-transparent-light.png'
const { logo, navActions } = navigationBarData
const logoWidth = 250
const logoHeight = 56

// Type assertion for navActions to ensure type safety
const savedNavActions = navActions.map((action) => ({
	...action,
	size: action.size as 'base' | 'lg' | 'sm',
	style: action.style as 'primary' | 'secondary' | 'neutral'
}))
---

<header class="header">
	<div class="header__container">
		<nav aria-label="main navigation" role="navigation" class="header__nav">
			<!-- Logo -->
			<a href="/" class="header__logo">
				<Image
					src={lightLogo}
					alt={logo.alt}
					width={logoWidth}
					height={logoHeight}
					class="header__logo-img dark:hidden"
					loading="eager"
					decoding="async"
				/>
				<Image
					src={darkLogo}
					alt={logo.alt}
					width={logoWidth}
					height={logoHeight}
					class="header__logo-img hidden dark:block"
					loading="eager"
					decoding="async"
				/>
			</a>

			<!-- Theme Switcher -->
			<Switcher />

			<!-- Navigation action buttons -->
			<div class="header__actions">
				{
					savedNavActions.map((action) => (
						<Button classes="flex-auto" size={action.size} style={action.style} link={action.link}>
							{action.name}
						</Button>
					))
				}
			</div>
		</nav>
	</div>
</header>

<style>
	.header {
		@apply sticky top-0 z-20 w-full shadow-sm shadow-neutral-900/5 before:absolute after:absolute after:left-0 after:top-full after:z-10 after:block after:h-px after:w-full lg:after:hidden dark:shadow-neutral-950/40;
	}
	.header:before {
		@apply block h-full w-full bg-white/95 lg:backdrop-blur-sm dark:bg-neutral-900/95;
	}
	.header__container {
		@apply container relative mx-auto px-6;
	}
	.header__logo {
		@apply flex flex-auto items-center gap-2 whitespace-nowrap py-3 font-headings text-2xl font-black tracking-wider focus:outline-none;
	}
	.header__logo-img {
		@apply h-auto w-auto max-h-10 max-w-[60px] lg:max-w-[250px];
	}
	.header__nav {
		@apply flex h-[5.5rem] items-stretch gap-6 font-medium text-neutral-700 lg:justify-between dark:text-neutral-50;
	}

	.header__actions {
		@apply flex items-center gap-4;
	}
</style>
